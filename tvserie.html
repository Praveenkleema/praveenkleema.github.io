<html lang="en">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>New Tv Serie</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./files/bootstrap.min.css">
    <link rel="stylesheet" href="./files/font-awesome.min.css">
    <link rel="stylesheet" href="./files/slick.css">
    <link rel="stylesheet" href="./files/slick-theme.css">
    <link rel="stylesheet" href="./files/owl.carousel.min.css">
    <link rel="stylesheet" href="./files/animate.min.css">
    <link rel="stylesheet" href="./files/magnific-popup.css">
    <link rel="stylesheet" href="./files/select2.min.css">
    <link rel="stylesheet" href="./files/select2-bootstrap4.min.css">
    <link rel="stylesheet" href="./files/slick-animation.css">
    <link rel="stylesheet" href="./files/style.css">
    <style>
        ::-webkit-scrollbar {
            width: 0.2vw;
        }

        ::-webkit-scrollbar-thumb {
            border-radius: 100vw;
            background: #f93742;
            ;
        }
    </style>
</head>

<body>


    <link rel="stylesheet" href="./files/crud.css">

    <div class="container">
        <h1 class="page_header">Create a New Tv Serie</h1>
        <form action="<%= server_main_url %>/tvseries/create_tvserie" method="post">
    
            <div class="form-row">
                <div class="input_">
                    <h1>IMDD Id</h1>
                    <input type="text" id="imdb_id" name="imdb_id" placeholder="IMDB ID" required>
                </div>
                <div class="input_">
                    <h1>Name</h1>
                    <input type="text" id="name" name="name" placeholder="Name" >
                </div>
            </div>
            
            <div class="form-row">
                <div class="input_">
                    <h1>Year</h1>
                    <input type="text" id="year" name="year" placeholder="Year">
                </div>
                <div class="input_">
                    <h1>Runtime</h1>
                    <input type="text" id="runtime" name="runtime" placeholder="Runtime Per Episode">
                </div>
            </div>
    
            <div class="form-row">
                <div class="input_">
                    <h1>Description</h1>
                    <input type="text" id="description" name="description" placeholder="Description">
                </div>
                <div class="input_">
                    <h1>Trailer Link</h1>
                    <input type="text" id="trailer_link" name="trailer_link" placeholder="Trailer Link">
                </div>
            </div>
            
            <div class="form-row">
                <div class="input_">
                    <h1>Video Link</h1>
                    <input type="text" id="video_link" name="video_link" placeholder="Video Link">
                </div>
                <div class="input_">
                    <h1>Thumbnail Link</h1>
                    <input type="text" id="thumbnail_link" name="thumbnail_link" placeholder="Thumbnail Link">
                </div>
            </div>
            
            <div class="form-row">
                <div class="input_">
                    <h1>Background Link</h1>
                    <input type="text" id="background_link" name="background_link" placeholder="Background Image Link">
                </div>
                <div class="input_">
                    <h1>TV Show Rated</h1>
                    <input type="text" id="rated" name="rated" placeholder="Rated">
                </div>
            </div>
    
            <div class="form-row">
                <div class="input_">
                    <h1>TV Show Rating</h1>
                    <input type="text" id="rating" name="rating" placeholder="Rating">
                </div>
                <div class="input_">
                    <h1>Audience</h1>
                    <input type="text" id="audience" name="audience" value="Adult" placeholder="Audience (Kid/Adult/Porn) Default: Adult">
                </div>
            </div>
    
            <h2>Use "," to Separate</h2>
            <div class="form-row">
                <div class="input_">
                    <h1>Tags</h1>
                    <input type="text" id="tags" name="tags" placeholder="Tags">
                </div>
                <div class="input_">
                    <h1>Categorys</h1>
                    <input type="text" id="categorys" name="categorys" placeholder="Categorys">
                </div>
            </div>
    
            <div class="form-row">
                <div class="input_">
                    <input type="text" id="confirm" name="confirm" placeholder="Confirm this: type anything" required>
                </div>
            </div>
    
            <button class="submit_btn" type="submit">Create Tv Serie</button>
        </form>
        <!-- Import Export Section -->
    
        <style>
            #importBtnLabel{
                background-color: rgb(176, 0, 150);
                padding: 10px 20px;
                border-radius: 20px;
                width: 120px;
                height: 45px;
                text-align: center;
                font-family: cursive;
                transition: 0.4s ease;
            }
            #importBtnLabel:hover{
                background-color: rgb(166, 0, 255);
            }
        </style>    
    
        <div class="import_export_section">
            <div class="import_container">
                    <input hidden id="import_btn" type="file">
                    <label id="importBtnLabel" for="import_btn">Import</label>
                    
            </div>
            <button class="submit_btn" style="background-color: rgb(101, 0, 184);" id="export_btn">Export</button>
        </div>
        
    </div>
    
    <!-- Export and Import Script -->
    <script>
    
        // Export Section - Done
        const exportBtn = document.getElementById("export_btn")
        exportBtn.addEventListener("click",(e)=>{
            e.preventDefault()
            const confirm = document.getElementById("confirm")
    
            const imdb_id = document.getElementById("imdb_id").value
            const name = document.getElementById("name").value
            const year = document.getElementById("year").value
            const runtime = document.getElementById("runtime").value
            const description =document.getElementById("description").value 
            const trailer_link =document.getElementById("trailer_link").value 
            const video_link = document.getElementById("video_link").value
            const thumbnail_link = document.getElementById("thumbnail_link").value
            const background_link = document.getElementById("background_link").value
            const rated = document.getElementById("rated").value
            const rating = document.getElementById("rating").value
            const audience = document.getElementById("audience").value
            const tags = document.getElementById("tags").value
            const categorys = document.getElementById("categorys").value
            
            const details = {
                imdb_id:imdb_id,
                name:name,
                year:year,
                runtime:runtime,
                description:description,
                trailer_link:trailer_link,
                video_link:video_link,
                thumbnail_link:thumbnail_link,
                background_link:background_link,
                rated:rated,
                rating:rating,
                audience:audience,
                tags:tags,
                categorys:categorys
            }
    
            if (confirm.value != ""){
                const link = document.createElement("a");
                const file = new Blob([JSON.stringify(details)], { type: 'text/plain' });
                link.href = URL.createObjectURL(file);
                link.download = "export_tvserie.txt";
                link.click();
                URL.revokeObjectURL(link.href);
            }else{
                alert("Confirm Before Export")
            }
    
    
        })
    
        // Import Section
        const importInput = document.getElementById("import_btn")
        importInput.addEventListener("change",(e)=>{
            e.preventDefault()
            var fileReader_ =new FileReader();
            fileReader_.onload= ()=> {
                let jsonData = JSON.parse(fileReader_.result)
                const imdb_id = document.getElementById("imdb_id").value = jsonData["imdb_id"]
                const name = document.getElementById("name").value = jsonData["name"]
                const year = document.getElementById("year").value = jsonData["year"]
                const runtime = document.getElementById("runtime").value = jsonData["runtime"]
                const description =document.getElementById("description").value = jsonData["description"] 
                const trailer_link =document.getElementById("trailer_link").value = jsonData["trailer_link"] 
                const video_link = document.getElementById("video_link").value = jsonData["video_link"]
                const thumbnail_link = document.getElementById("thumbnail_link").value = jsonData["thumbnail_link"]
                const background_link = document.getElementById("background_link").value = jsonData["background_link"]
                const rated = document.getElementById("rated").value = jsonData["rated"]
                const rating = document.getElementById("rating").value = jsonData["rating"]
                const audience = document.getElementById("audience").value = jsonData["audience"]
                const tags = document.getElementById("tags").value = jsonData["tags"]
                const categorys = document.getElementById("categorys").value = jsonData["categorys"]
            }
                  
            fileReader_.readAsText(e.target.files[0]);
        })
    
    
    </script>


</body>

</html>